"use strict";(self.webpackChunkx_admin_dashboard=self.webpackChunkx_admin_dashboard||[]).push([[696],{35696:function(e,n,t){t.r(n),t.d(n,{default:function(){return P}});var r=t(74165),a=t(15861),i=t(70885),l=t(47313),s=t(82937),o=t(42669),c=t(16157),d=t(1413),u=t(62111),h=t(58446),m=t(46417),x={chart:{height:450,type:"area",toolbar:{show:!1}},dataLabels:{enabled:!1},stroke:{curve:"smooth",width:2},grid:{strokeDashArray:0}},p=function(e){var n=e.series,t=(0,u.Z)(),r=t.palette.text,a=r.primary,s=r.secondary,o=t.palette.divider,c=(0,l.useState)(x),p=(0,i.Z)(c,2),v=p[0],j=p[1];return(0,l.useEffect)((function(){j((function(e){return(0,d.Z)((0,d.Z)({},e),{},{colors:[t.palette.primary.main,t.palette.secondary.main,t.palette.success.main,t.palette.warning.main,t.palette.info.main,t.palette.primary[700],t.palette.secondary.light,t.palette.success.dark,t.palette.warning.dark,t.palette.primary[100],t.palette.primary.light,t.palette.primary[400],t.palette.primary.dark],xaxis:{categories:["Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","Jan","Feb","Mar"],labels:{style:{colors:[s,s,s,s,s,s,s,s,s,s,s,s]}},axisBorder:{show:!0,color:o},tickAmount:12},yaxis:{labels:{style:{colors:[s]}}},grid:{borderColor:o},tooltip:{theme:"light"}})}))}),[a,s,o,t]),(0,m.jsx)(h.Z,{options:v,series:n,type:"line",height:450})},v=t(59090),j=t(62463),Z=t(75958),g=t(27164),f=t(77552),y=function(e){var n=e.color,t=e.title,r=e.count,a=e.percentage,i=e.isLoss;e.extra;return(0,m.jsx)(v.Z,{contentSX:{p:2.25},children:(0,m.jsxs)(j.Z,{spacing:.5,children:[(0,m.jsx)(o.Z,{variant:"h6",color:"textSecondary",children:t}),(0,m.jsxs)(s.ZP,{container:!0,alignItems:"center",children:[(0,m.jsx)(s.ZP,{item:!0,children:(0,m.jsx)(o.Z,{variant:"h4",color:"inherit",children:r})}),a&&(0,m.jsx)(s.ZP,{item:!0,children:(0,m.jsx)(Z.Z,{variant:"combined",color:n,icon:(0,m.jsxs)(m.Fragment,{children:[!i&&(0,m.jsx)(g.Z,{style:{fontSize:"0.75rem",color:"inherit"}}),i&&(0,m.jsx)(f.Z,{style:{fontSize:"0.75rem",color:"inherit"}})]}),label:"".concat(a,"%"),sx:{ml:1.25,pl:1},size:"small"})})]})]})})};y.defaultProps={color:"primary"};var b=y,S=t(93231),w=t(56744),k=t(9054),P=function(){var e=(0,l.useState)([]),n=(0,i.Z)(e,2),t=n[0],d=n[1],u=(0,l.useState)(null),h=(0,i.Z)(u,2),x=h[0],j=h[1],Z=(0,l.useState)(1),g=(0,i.Z)(Z,2),f=g[0],y=g[1],P=(0,l.useState)(null),C=(0,i.Z)(P,2),N=C[0],D=C[1],_=(0,l.useState)([]),E=(0,i.Z)(_,2),F=E[0],A=E[1],J=(0,l.useState)([]),z=(0,i.Z)(J,2),I=z[0],L=z[1],M=JSON.parse(localStorage.getItem("_userData"));(0,l.useEffect)((function(){var e,n=f;M.subsidary?n=null===M||void 0===M||null===(e=M.subsidary)||void 0===e?void 0:e.id:B(),y(n),O((new Date).getFullYear(),n),1===(null===M||void 0===M?void 0:M.role_id)&&S.Z.getDashboardCount().then((function(e){var n=e.data;d(null===n||void 0===n?void 0:n.data)}))}),[]);var B=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.Z.getSubsidaries();case 2:n=e.sent,A(null===n||void 0===n?void 0:n.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n,t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:S.Z.getDashboardGraphData(n,t).then((function(e){var n=e.data;j(null===n||void 0===n?void 0:n.data)}));case 1:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),T=(0,l.useMemo)((function(){return null===t||void 0===t?void 0:t.map((function(e){return(0,m.jsx)(s.ZP,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,m.jsx)(b,{title:e.name,count:e.cntVal})},null===e||void 0===e?void 0:e.name)}))}),[t]);return(0,m.jsxs)(s.ZP,{container:!0,rowSpacing:4.5,columnSpacing:2.75,children:[(0,m.jsx)(s.ZP,{item:!0,xs:12,sx:{mb:-2.25},children:(0,m.jsx)(o.Z,{variant:"h5",children:"Dashboard"})}),T,(0,m.jsx)(s.ZP,{item:!0,md:8,sx:{display:{sm:"none",md:"block",lg:"none"}}}),(0,m.jsx)(s.ZP,{item:!0,xs:12,md:12,lg:12,children:(0,m.jsxs)("div",{className:"row",children:[(0,m.jsxs)("div",{className:"col-lg-4",children:[(0,m.jsx)("label",{children:"Financial Year"}),"\xa0",(0,m.jsxs)("select",{className:"form-control",onChange:function(e){return D(e)},children:[(0,m.jsx)("option",{value:"2023",children:"2023-24"}),(0,m.jsx)("option",{value:"2022",children:"2022-23"})]})]}),(0,m.jsx)("div",{className:"col-lg-4",children:(null===F||void 0===F?void 0:F.length)>0&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("label",{children:"Subsidiary"}),"\xa0",(0,m.jsxs)("select",{className:"form-control",value:f,onChange:function(e){var n;return y(null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.value)},children:[(0,m.jsx)("option",{value:"",children:"--SELECT--"}),F.map((function(e){return(0,m.jsx)("option",{value:e.id,children:e.name})}))]})]})}),(0,m.jsx)("div",{className:"col-lg-4",style:{paddingTop:"20px"},children:(0,m.jsx)("button",{className:"btn btn-primary",onClick:function(e){O(null===N||void 0===N?void 0:N.target.value,f),L({financial_year:null===N||void 0===N?void 0:N.target.value,selected_subsidary:f})},children:"Search"})})]})}),(0,m.jsxs)(s.ZP,{item:!0,xs:12,md:12,lg:12,children:[(0,m.jsx)(s.ZP,{container:!0,alignItems:"center",justifyContent:"space-between",children:(0,m.jsx)(s.ZP,{item:!0,children:(0,m.jsx)(o.Z,{variant:"h5",children:"Subsidiary Wise Heads"})})}),(0,m.jsx)(v.Z,{content:!1,sx:{mt:1.5},children:(0,m.jsx)(c.Z,{sx:{pt:1,pr:2},children:(null===x||void 0===x?void 0:x.length)>0&&(0,m.jsx)(p,{series:x})})})]}),(0,m.jsx)(s.ZP,{item:!0,xs:12,md:12,lg:12,children:(0,m.jsx)(v.Z,{sx:{mt:2},content:!1,children:(0,m.jsx)(k.y,{hideSearchBar:!0,onSearch:I,onChildEvent:function(e){console.log("handled child ebent"),O(null===N||void 0===N?void 0:N.target.value,f)}})})})]})}}}]);