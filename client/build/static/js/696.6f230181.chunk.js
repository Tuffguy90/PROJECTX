"use strict";(self.webpackChunkx_admin_dashboard=self.webpackChunkx_admin_dashboard||[]).push([[696],{35696:function(e,t,n){n.r(t),n.d(t,{default:function(){return P}});var a=n(74165),r=n(15861),i=n(70885),l=n(47313),s=n(82937),o=n(42669),c=n(16157),d=n(1413),u=n(62111),h=n(58446),m=n(46417),x={chart:{height:450,type:"area",toolbar:{show:!1}},dataLabels:{enabled:!1},stroke:{curve:"smooth",width:2},grid:{strokeDashArray:0}},p=function(e){var t=e.series,n=(0,u.Z)(),a=n.palette.text,r=a.primary,s=a.secondary,o=n.palette.divider,c=(0,l.useState)(x),p=(0,i.Z)(c,2),v=p[0],g=p[1];return(0,l.useEffect)((function(){g((function(e){return(0,d.Z)((0,d.Z)({},e),{},{colors:[n.palette.primary.main,n.palette.secondary.main,n.palette.success.main,n.palette.warning.main,n.palette.info.main,n.palette.primary[700],n.palette.secondary.light,n.palette.success.dark,n.palette.warning.dark,n.palette.primary[100],n.palette.primary.light,n.palette.primary[400],n.palette.primary.dark],xaxis:{categories:["Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","Jan","Feb","Mar"],labels:{style:{colors:[s,s,s,s,s,s,s,s,s,s,s,s]}},axisBorder:{show:!0,color:o},tickAmount:12},yaxis:{labels:{style:{colors:[s]}}},grid:{borderColor:o},tooltip:{theme:"light"}})}))}),[r,s,o,n]),(0,m.jsx)(h.Z,{options:v,series:t,type:"line",height:450})},v=n(59090),g=n(62463),j=n(75958),Z=n(27164),f=n(77552),y=function(e){var t=e.color,n=e.title,a=e.count,r=e.percentage,i=e.isLoss;e.extra;return(0,m.jsx)(v.Z,{contentSX:{p:2.25},children:(0,m.jsxs)(g.Z,{spacing:.5,children:[(0,m.jsx)(o.Z,{variant:"h6",color:"textSecondary",children:n}),(0,m.jsxs)(s.ZP,{container:!0,alignItems:"center",children:[(0,m.jsx)(s.ZP,{item:!0,children:(0,m.jsx)(o.Z,{variant:"h4",color:"inherit",children:a})}),r&&(0,m.jsx)(s.ZP,{item:!0,children:(0,m.jsx)(j.Z,{variant:"combined",color:t,icon:(0,m.jsxs)(m.Fragment,{children:[!i&&(0,m.jsx)(Z.Z,{style:{fontSize:"0.75rem",color:"inherit"}}),i&&(0,m.jsx)(f.Z,{style:{fontSize:"0.75rem",color:"inherit"}})]}),label:"".concat(r,"%"),sx:{ml:1.25,pl:1},size:"small"})})]})]})})};y.defaultProps={color:"primary"};var b=y,S=n(93231),w=n(56744),k=n(9054),P=function(){var e=(0,l.useState)([]),t=(0,i.Z)(e,2),n=t[0],d=t[1],u=(0,l.useState)(null),h=(0,i.Z)(u,2),x=h[0],g=h[1],j=(0,l.useState)(1),Z=(0,i.Z)(j,2),f=Z[0],y=Z[1],P=(0,l.useState)(null),N=(0,i.Z)(P,2),C=N[0],D=N[1],_=(0,l.useState)([]),F=(0,i.Z)(_,2),A=F[0],E=F[1],J=(0,l.useState)([]),L=(0,i.Z)(J,2),z=L[0],I=L[1],M=JSON.parse(localStorage.getItem("_userData"));(0,l.useEffect)((function(){var e=f;M.subsidary&&0!==M.subsidary.length?E(M.subsidary):B(),O((new Date).getFullYear(),e),1===(null===M||void 0===M?void 0:M.role_id)&&S.Z.getDashboardCount().then((function(e){var t=e.data;d(null===t||void 0===t?void 0:t.data)}))}),[]);var B=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("called loadSubsidiaries"),e.next=3,w.Z.formattedSubSidaryList();case 3:t=e.sent,E(null===t||void 0===t?void 0:t.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t,n){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:S.Z.getDashboardGraphData(t,n).then((function(e){var t=e.data;g(null===t||void 0===t?void 0:t.data)}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),T=(0,l.useMemo)((function(){return null===n||void 0===n?void 0:n.map((function(e){return(0,m.jsx)(s.ZP,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,m.jsx)(b,{title:e.name,count:e.cntVal})},null===e||void 0===e?void 0:e.name)}))}),[n]);return(0,m.jsxs)(s.ZP,{container:!0,rowSpacing:4.5,columnSpacing:2.75,children:[(0,m.jsx)(s.ZP,{item:!0,xs:12,sx:{mb:-2.25},children:(0,m.jsx)(o.Z,{variant:"h5",children:"Dashboard"})}),T,(0,m.jsx)(s.ZP,{item:!0,md:8,sx:{display:{sm:"none",md:"block",lg:"none"}}}),(0,m.jsx)(s.ZP,{item:!0,xs:12,md:12,lg:12,children:(0,m.jsxs)("div",{className:"row",children:[(0,m.jsxs)("div",{className:"col-lg-4",children:[(0,m.jsx)("label",{children:"Financial Year"}),"\xa0",(0,m.jsxs)("select",{className:"form-control",onChange:function(e){return D(e)},children:[(0,m.jsx)("option",{value:"2023",children:"2023-24"}),(0,m.jsx)("option",{value:"2022",children:"2022-23"})]})]}),(0,m.jsx)("div",{className:"col-lg-4",children:(null===A||void 0===A?void 0:A.length)>0&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("label",{children:"Subsidiary"}),"\xa0",(0,m.jsxs)("select",{className:"form-control",value:f,onChange:function(e){var t;return y(null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value)},children:[(0,m.jsx)("option",{value:"",children:"--SELECT--"}),A.map((function(e,t){return(0,m.jsx)("option",{value:e.id,children:e.h_name},t)}))]})]})}),(0,m.jsx)("div",{className:"col-lg-4",style:{paddingTop:"20px"},children:(0,m.jsx)("button",{className:"btn btn-primary",onClick:function(e){O(null===C||void 0===C?void 0:C.target.value,f),I({financial_year:null===C||void 0===C?void 0:C.target.value,selected_subsidary:f})},children:"Search"})})]})}),(0,m.jsxs)(s.ZP,{item:!0,xs:12,md:12,lg:12,children:[(0,m.jsx)(s.ZP,{container:!0,alignItems:"center",justifyContent:"space-between",children:(0,m.jsx)(s.ZP,{item:!0,children:(0,m.jsx)(o.Z,{variant:"h5",children:"Subsidiary Wise Heads"})})}),(0,m.jsx)(v.Z,{content:!1,sx:{mt:1.5},children:(0,m.jsx)(c.Z,{sx:{pt:1,pr:2},children:(null===x||void 0===x?void 0:x.length)>0?(0,m.jsx)(p,{series:x}):(0,m.jsx)("h5",{style:{textAlign:"center"},className:"p-5",children:"Data Not Found."})})})]}),(0,m.jsx)(s.ZP,{item:!0,xs:12,md:12,lg:12,children:(0,m.jsx)(v.Z,{sx:{mt:2},content:!1,children:(0,m.jsx)(k.y,{hideSearchBar:!0,onSearch:z,onChildEvent:function(e){console.log("handled child ebent"),O(null===C||void 0===C?void 0:C.target.value,f)}})})})]})}}}]);