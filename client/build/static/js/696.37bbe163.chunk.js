"use strict";(self.webpackChunkx_admin_dashboard=self.webpackChunkx_admin_dashboard||[]).push([[696],{35696:function(e,n,t){t.r(n),t.d(n,{default:function(){return C}});var a=t(74165),i=t(15861),r=t(70885),l=t(47313),s=t(82937),o=t(42669),c=t(16157),d=t(1413),u=t(62111),v=t(58446),h=t(46417),m={chart:{height:450,type:"area",toolbar:{show:!1}},dataLabels:{enabled:!1},stroke:{curve:"smooth",width:2},grid:{strokeDashArray:0}},x=function(e){var n=e.series,t=(0,u.Z)(),a=t.palette.text,i=a.primary,s=a.secondary,o=t.palette.divider,c=(0,l.useState)(m),x=(0,r.Z)(c,2),p=x[0],f=x[1];return(0,l.useEffect)((function(){f((function(e){return(0,d.Z)((0,d.Z)({},e),{},{colors:[t.palette.primary.main,t.palette.secondary.main,t.palette.success.main,t.palette.warning.main,t.palette.info.main,t.palette.primary[700],t.palette.secondary.light,t.palette.success.dark,t.palette.warning.dark,t.palette.primary[100],t.palette.primary.light,t.palette.primary[400],t.palette.primary.dark],xaxis:{categories:["Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","Jan","Feb","Mar"],labels:{style:{colors:[s,s,s,s,s,s,s,s,s,s,s,s]}},axisBorder:{show:!0,color:o},tickAmount:12},yaxis:{labels:{style:{colors:[s]}}},grid:{borderColor:o},tooltip:{theme:"light"}})}))}),[i,s,o,t]),(0,h.jsx)(v.Z,{options:p,series:n,type:"line",height:450})},p=t(74162),f=t(62463),g=t(75958),j=t(27164),Z=t(77552),y=function(e){var n=e.color,t=e.title,a=e.count,i=e.percentage,r=e.isLoss;e.extra;return(0,h.jsx)(p.Z,{contentSX:{p:2.25},children:(0,h.jsxs)(f.Z,{spacing:.5,children:[(0,h.jsx)(o.Z,{variant:"h6",color:"textSecondary",children:t}),(0,h.jsxs)(s.ZP,{container:!0,alignItems:"center",children:[(0,h.jsx)(s.ZP,{item:!0,children:(0,h.jsx)(o.Z,{variant:"h4",color:"inherit",children:a})}),i&&(0,h.jsx)(s.ZP,{item:!0,children:(0,h.jsx)(g.Z,{variant:"combined",color:n,icon:(0,h.jsxs)(h.Fragment,{children:[!r&&(0,h.jsx)(j.Z,{style:{fontSize:"0.75rem",color:"inherit"}}),r&&(0,h.jsx)(Z.Z,{style:{fontSize:"0.75rem",color:"inherit"}})]}),label:"".concat(i,"%"),sx:{ml:1.25,pl:1},size:"small"})})]})]})})};y.defaultProps={color:"primary"};var b=y,S=t(93231),w=t(56744),k=t(9054),C=function(){var e=(0,l.useState)([]),n=(0,r.Z)(e,2),t=n[0],d=n[1],u=(0,l.useState)(null),v=(0,r.Z)(u,2),m=v[0],f=v[1],g=(0,l.useState)(""),j=(0,r.Z)(g,2),Z=j[0],y=j[1],C=(0,l.useState)(""),N=(0,r.Z)(C,2),P=N[0],_=N[1],D=(0,l.useState)(""),E=(0,r.Z)(D,2),F=E[0],L=E[1],A=(0,l.useState)([]),J=(0,r.Z)(A,2),T=J[0],z=J[1],I=(0,l.useState)(null),M=(0,r.Z)(I,2),Y=M[0],B=M[1],O=(0,l.useState)([]),G=(0,r.Z)(O,2),H=G[0],U=G[1],V=(0,l.useState)([]),W=(0,r.Z)(V,2),X=W[0],q=W[1],K=(0,l.useState)([]),Q=(0,r.Z)(K,2),R=Q[0],$=Q[1],ee=JSON.parse(localStorage.getItem("_userData"));(0,l.useEffect)((function(){var e=P;ee.subsidary&&0!==ee.subsidary.length?U(ee.subsidary):ne(),te((new Date).getFullYear(),e),1===(null===ee||void 0===ee?void 0:ee.role_id)&&S.Z.getDashboardCount().then((function(e){var n=e.data;d(null===n||void 0===n?void 0:n.data)})),S.Z.getFinancialYearList().then((function(e){var n=e.data;$(null===n||void 0===n?void 0:n.data)}))}),[]);var ne=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.Z.getSubsidaries(1);case 2:n=e.sent,U(null===n||void 0===n?void 0:n.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),te=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(n,t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:S.Z.getDashboardGraphData(n,t).then((function(e){var n=e.data;f(null===n||void 0===n?void 0:n.data)}));case 1:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),ae=(0,l.useMemo)((function(){return null===t||void 0===t?void 0:t.map((function(e){return(0,h.jsx)(s.ZP,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,h.jsx)(b,{title:e.name,count:e.cntVal})},null===e||void 0===e?void 0:e.name)}))}),[t]);return(0,h.jsxs)(s.ZP,{container:!0,rowSpacing:4.5,columnSpacing:2.75,children:[(0,h.jsx)(s.ZP,{item:!0,xs:12,sx:{mb:-2.25},children:(0,h.jsx)(o.Z,{variant:"h5",children:"Dashboard"})}),ae,(0,h.jsx)(s.ZP,{item:!0,md:8,sx:{display:{sm:"none",md:"block",lg:"none"}}}),(0,h.jsx)(s.ZP,{item:!0,xs:12,md:12,lg:12,children:(0,h.jsxs)("div",{className:"row",children:[(0,h.jsxs)("div",{className:"col-lg-3",children:[(0,h.jsx)("label",{children:"Financial Year"}),"\xa0",(0,h.jsxs)("select",{className:"form-control",onChange:function(e){return B(e)},children:[(0,h.jsx)("option",{value:"",children:"--SELECT--"}),R.map((function(e,n){return(0,h.jsx)("option",{value:e.financial_year,children:e.fin_name},n)}))]})]}),(0,h.jsx)("div",{className:"col-lg-3",children:(null===H||void 0===H?void 0:H.length)>0&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("label",{children:"Subsidiary"}),"\xa0",(0,h.jsxs)("select",{className:"form-control",value:Z,onChange:function(e){var n,t,a;return y(null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.value),function(e){var n;""!==F&&L("");var t=H.filter((function(n){if(e==(null===n||void 0===n?void 0:n.id))return n}));z(null===(n=t[0])||void 0===n?void 0:n.child_subsidiary)}(null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value),_(null===e||void 0===e||null===(a=e.target)||void 0===a?void 0:a.value)},children:[(0,h.jsx)("option",{value:"",children:"--SELECT--"}),H.map((function(e,n){return(0,h.jsx)("option",{value:e.id,children:e.name},n)}))]})]})}),(0,h.jsx)("div",{className:"col-lg-3",children:(null===T||void 0===T?void 0:T.length)>0&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("label",{children:"Units"}),"\xa0",(0,h.jsxs)("select",{className:"form-control",value:F,onChange:function(e){var n,t;return L(null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.value),_(null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value)},children:[(0,h.jsx)("option",{value:"",children:"--SELECT--"}),T.map((function(e,n){return(0,h.jsx)("option",{value:e.id,children:e.name},n)}))]})]})}),(0,h.jsx)("div",{className:"col-lg-3",style:{paddingTop:"20px"},children:(0,h.jsx)("button",{className:"btn btn-primary",onClick:function(e){te(null===Y||void 0===Y?void 0:Y.target.value,P),q({financial_year:null===Y||void 0===Y?void 0:Y.target.value,selected_subsidary:P})},children:"Search"})})]})}),(0,h.jsxs)(s.ZP,{item:!0,xs:12,md:12,lg:12,children:[(0,h.jsx)(s.ZP,{container:!0,alignItems:"center",justifyContent:"space-between",children:(0,h.jsx)(s.ZP,{item:!0,children:(0,h.jsx)(o.Z,{variant:"h5",children:"Subsidiary Wise Heads"})})}),(0,h.jsx)(p.Z,{content:!1,sx:{mt:1.5},children:(0,h.jsx)(c.Z,{sx:{pt:1,pr:2},children:(null===m||void 0===m?void 0:m.length)>0?(0,h.jsx)(x,{series:m}):(0,h.jsx)("h5",{style:{textAlign:"center"},className:"p-5",children:"Data Not Found."})})})]}),(0,h.jsx)(s.ZP,{item:!0,xs:12,md:12,lg:12,children:(0,h.jsx)(p.Z,{sx:{mt:2},content:!1,children:(0,h.jsx)(k.y,{hideSearchBar:!0,onSearch:X,onChildEvent:function(e){te(null===Y||void 0===Y?void 0:Y.target.value,P)}})})})]})}}}]);