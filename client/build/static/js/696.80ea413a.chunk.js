"use strict";(self.webpackChunkx_admin_dashboard=self.webpackChunkx_admin_dashboard||[]).push([[696],{35696:function(e,a,t){t.r(a),t.d(a,{default:function(){return F}});var n=t(74165),l=t(15861),r=t(70885),i=t(47313),o=t(82937),s=t(42669),d=t(16157),u=t(41370),c=t.n(u),m=t(1413),h=t(62111),v=t(58446),p=t(46417),x={chart:{height:450,type:"area",toolbar:{show:!1}},dataLabels:{enabled:!1},stroke:{curve:"smooth",width:2},grid:{strokeDashArray:0}},j=function(e){var a=e.series,t=(0,h.Z)(),n=t.palette.text,l=n.primary,o=n.secondary,s=t.palette.divider,d=(0,i.useState)(x),u=(0,r.Z)(d,2),c=u[0],j=u[1];return(0,i.useEffect)((function(){j((function(e){return(0,m.Z)((0,m.Z)({},e),{},{colors:[t.palette.primary.main,t.palette.secondary.main,t.palette.success.main,t.palette.warning.main,t.palette.info.main,t.palette.primary[700],t.palette.secondary.light,t.palette.success.dark,t.palette.warning.dark,t.palette.primary[100],t.palette.primary.light,t.palette.primary[400],t.palette.primary.dark],xaxis:{categories:["Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","Jan","Feb","Mar"],labels:{style:{colors:[o,o,o,o,o,o,o,o,o,o,o,o]}},axisBorder:{show:!0,color:s},tickAmount:12},yaxis:{labels:{style:{colors:[o]}}},grid:{borderColor:s},tooltip:{theme:"light"}})}))}),[l,o,s,t]),(0,p.jsx)(v.Z,{options:c,series:a,type:"line",height:450})},g=t(59090),f=t(62463),Z=t(75958),y=t(27164),b=t(77552),_=function(e){var a=e.color,t=e.title,n=e.count,l=e.percentage,r=e.isLoss;e.extra;return(0,p.jsx)(g.Z,{contentSX:{p:2.25},children:(0,p.jsxs)(f.Z,{spacing:.5,children:[(0,p.jsx)(s.Z,{variant:"h6",color:"textSecondary",children:t}),(0,p.jsxs)(o.ZP,{container:!0,alignItems:"center",children:[(0,p.jsx)(o.ZP,{item:!0,children:(0,p.jsx)(s.Z,{variant:"h4",color:"inherit",children:n})}),l&&(0,p.jsx)(o.ZP,{item:!0,children:(0,p.jsx)(Z.Z,{variant:"combined",color:a,icon:(0,p.jsxs)(p.Fragment,{children:[!r&&(0,p.jsx)(y.Z,{style:{fontSize:"0.75rem",color:"inherit"}}),r&&(0,p.jsx)(b.Z,{style:{fontSize:"0.75rem",color:"inherit"}})]}),label:"".concat(l,"%"),sx:{ml:1.25,pl:1},size:"small"})})]})]})})};_.defaultProps={color:"primary"};var C=_,S=t(93231),w=(t(67114),t(56744)),F=function(){var e=(0,i.useState)([]),a=(0,r.Z)(e,2),t=a[0],m=a[1],h=(0,i.useState)(null),v=(0,r.Z)(h,2),x=v[0],f=v[1],Z=(0,i.useState)(1),y=(0,r.Z)(Z,2),b=y[0],_=y[1],F=(0,i.useState)(null),P=(0,r.Z)(F,2),k=P[0],I=P[1],D=(0,i.useState)([]),T=(0,r.Z)(D,2),N=T[0],A=T[1],E=(0,i.useState)([]),J=(0,r.Z)(E,2),z=J[0],M=J[1],R=JSON.parse(localStorage.getItem("_userData"));(0,i.useEffect)((function(){var e,a=b;R.subsidary?a=null===R||void 0===R||null===(e=R.subsidary)||void 0===e?void 0:e.id:Q(),_(a),O((new Date).getFullYear(),a),Y((new Date).getFullYear(),a),1===(null===R||void 0===R?void 0:R.role_id)&&S.Z.getDashboardCount().then((function(e){var a=e.data;m(null===a||void 0===a?void 0:a.data)}))}),[]);var Q=function(){var e=(0,l.Z)((0,n.Z)().mark((function e(){var a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.Z.getSubsidaries();case 2:a=e.sent,A(null===a||void 0===a?void 0:a.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Y=function(){var e=(0,l.Z)((0,n.Z)().mark((function e(a,t){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:S.Z.getDashboardGraphData(a,t).then((function(e){var a=e.data;f(null===a||void 0===a?void 0:a.data)}));case 1:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}(),L=function(e){return e.value},O=function(){var e=(0,l.Z)((0,n.Z)().mark((function e(a,t){var l;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l=S.Z.reportStore(a,t),M(l);case 2:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}(),B=(0,i.useMemo)((function(){return null===t||void 0===t?void 0:t.map((function(e){return(0,p.jsx)(o.ZP,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,p.jsx)(C,{title:e.name,count:e.cntVal})},null===e||void 0===e?void 0:e.name)}))}),[t]);return(0,p.jsxs)(o.ZP,{container:!0,rowSpacing:4.5,columnSpacing:2.75,children:[(0,p.jsx)(o.ZP,{item:!0,xs:12,sx:{mb:-2.25},children:(0,p.jsx)(s.Z,{variant:"h5",children:"Dashboard"})}),B,(0,p.jsx)(o.ZP,{item:!0,md:8,sx:{display:{sm:"none",md:"block",lg:"none"}}}),(0,p.jsx)(o.ZP,{item:!0,xs:12,md:12,lg:12,children:(0,p.jsxs)("div",{className:"row",children:[(0,p.jsxs)("div",{className:"col-lg-4",children:[(0,p.jsx)("label",{children:"Financial Year"}),"\xa0",(0,p.jsxs)("select",{className:"form-control",onChange:function(e){return I(e)},children:[(0,p.jsx)("option",{value:"2023",children:"2023-24"}),(0,p.jsx)("option",{value:"2022",children:"2022-23"})]})]}),(0,p.jsx)("div",{className:"col-lg-4",children:(null===N||void 0===N?void 0:N.length)>0&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("label",{children:"Subsidiary"}),"\xa0",(0,p.jsxs)("select",{className:"form-control",value:b,onChange:function(e){var a;return _(null===e||void 0===e||null===(a=e.target)||void 0===a?void 0:a.value)},children:[(0,p.jsx)("option",{value:"",children:"--SELECT--"}),N.map((function(e){return(0,p.jsx)("option",{value:e.id,children:e.name})}))]})]})}),(0,p.jsx)("div",{className:"col-lg-4",style:{paddingTop:"20px"},children:(0,p.jsx)("button",{className:"btn btn-primary",onClick:function(){var e,a,t=(new Date).getFullYear();Y((null===k||void 0===k||null===(e=k.target)||void 0===e?void 0:e.value)||t,b),O((null===k||void 0===k||null===(a=k.target)||void 0===a?void 0:a.value)||t,b)},children:"Search"})})]})}),(0,p.jsxs)(o.ZP,{item:!0,xs:12,md:12,lg:12,children:[(0,p.jsx)(o.ZP,{container:!0,alignItems:"center",justifyContent:"space-between",children:(0,p.jsx)(o.ZP,{item:!0,children:(0,p.jsx)(s.Z,{variant:"h5",children:"Subsidiary Wise Heads"})})}),(0,p.jsx)(g.Z,{content:!1,sx:{mt:1.5},children:(0,p.jsx)(d.Z,{sx:{pt:1,pr:2},children:(null===x||void 0===x?void 0:x.length)>0&&(0,p.jsx)(j,{series:x})})})]}),(0,p.jsxs)(o.ZP,{item:!0,xs:12,md:12,lg:12,children:[(0,p.jsxs)(o.ZP,{container:!0,alignItems:"center",justifyContent:"space-between",children:[(0,p.jsx)(o.ZP,{item:!0,children:(0,p.jsx)(s.Z,{variant:"h5",children:"Subsidiary Data"})}),(0,p.jsx)(o.ZP,{item:!0})]}),(0,p.jsx)(g.Z,{sx:{mt:2},content:!1,children:(0,p.jsxs)(c(),{dataSource:z,allowColumnReordering:!0,rowAlternationEnabled:!0,showBorders:!0,children:[(0,p.jsx)(u.Editing,{mode:"cell",allowAdding:!1,allowDeleting:!1,allowUpdating:!0,children:(0,p.jsx)(u.Popup,{title:"Head",showTitle:!0})}),(0,p.jsx)(u.SearchPanel,{visible:!0,highlightCaseSensitive:!0}),(0,p.jsx)(u.Column,{dataField:"head_name",width:200}),(0,p.jsx)(u.Column,{dataField:"data[0].month_value",caption:"April"}),(0,p.jsx)(u.Column,{dataField:"data[1].month_value",caption:"May"}),(0,p.jsx)(u.Column,{dataField:"data[2].month_value",caption:"June"}),(0,p.jsx)(u.Column,{dataType:"number",caption:"Q1",cellRender:function(e){var a,t=null===(a=e.data)||void 0===a?void 0:a.data;return parseInt(t[0].month_value)+parseInt(t[1].month_value+t[2].month_value)}}),(0,p.jsx)(u.Column,{dataField:"data[3].month_value",caption:"July"}),(0,p.jsx)(u.Column,{dataField:"data[4].month_value",caption:"Aug"}),(0,p.jsx)(u.Column,{dataField:"data[5].month_value",caption:"Sept"}),(0,p.jsx)(u.Column,{dataType:"number",caption:"Q2",cellRender:function(e){var a,t=null===(a=e.data)||void 0===a?void 0:a.data;return parseInt(t[3].month_value)+parseInt(t[4].month_value+t[5].month_value)}}),(0,p.jsx)(u.Column,{dataField:"data[6].month_value",caption:"Oct"}),(0,p.jsx)(u.Column,{dataField:"data[7].month_value",caption:"Nov"}),(0,p.jsx)(u.Column,{dataField:"data[8].month_value",caption:"Dec"}),(0,p.jsx)(u.Column,{dataType:"number",caption:"Q3",cellRender:function(e){var a,t=null===(a=e.data)||void 0===a?void 0:a.data;return parseInt(t[6].month_value)+parseInt(t[7].month_value+t[8].month_value)}}),(0,p.jsx)(u.Column,{dataField:"data[9].month_value",caption:"Jan"}),(0,p.jsx)(u.Column,{dataField:"data[10].month_value",caption:"Feb"}),(0,p.jsx)(u.Column,{dataField:"data[11].month_value",caption:"March"}),(0,p.jsx)(u.Column,{dataType:"number",caption:"Q4",cellRender:function(e){var a,t=null===(a=e.data)||void 0===a?void 0:a.data;return parseInt(t[9].month_value)+parseInt(t[10].month_value+t[11].month_value)}}),(0,p.jsx)(u.Export,{enabled:!0}),(0,p.jsxs)(u.Summary,{children:[(0,p.jsx)(u.TotalItem,{column:"head_name",summaryType:"sum",customizeText:function(){return"Sum"}}),[0,1,2,3,4,5,6,7,8,9,10,11].map((function(e){var a="data[".concat(e,"].month_value");return(0,p.jsx)(u.TotalItem,{column:a,summaryType:"sum",customizeText:L})}))]}),(0,p.jsx)(u.Paging,{})]})})]})]})}}}]);